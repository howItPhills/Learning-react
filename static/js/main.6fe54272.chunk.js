(this["webpackJsonplearning-react"]=this["webpackJsonplearning-react"]||[]).push([[0],{117:function(e,t,n){e.exports={dialog:"Dialog_dialog__2qvOq"}},118:function(e,t,n){e.exports={content:"Profile_content__2zMpF"}},119:function(e,t,n){},148:function(e,t,n){},247:function(e,t,n){"use strict";n.r(t);var r=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,248)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,s=t.getLCP,o=t.getTTFB;n(e),r(e),a(e),s(e),o(e)}))},a=(n(119),n(25)),s=n(3),o=n.n(s),i=n(12),c=n(2),u=n(11),l=n(109).create({withCredentials:!0,baseURL:"https://social-network.samuraijs.com/api/1.0/",headers:{"API-KEY":"1ae474cc-6077-46bc-8a25-db0c669baff8"}}),p={getUsers:function(e,t){return l.get("users?page=".concat(e,"&count=").concat(t)).then((function(e){return e.data}))},followUser:function(e){return l.post("follow/".concat(e)).then((function(e){return e.data}))},unfollowUser:function(e){return l.delete("follow/".concat(e)).then((function(e){return e.data}))},getProfile:function(e){return l.get("profile/".concat(e)).then((function(e){return e.data}))},requestUsersData:function(){return l.get("auth/me").then((function(e){return e.data}))},getStatus:function(e){return l.get("/profile/status/".concat(e)).then((function(e){return e.data}))},updateStatus:function(e){return l.put("/profile/status",{status:e}).then((function(e){return e.data}))},login:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return l.post("/auth/login",{email:e,password:t,rememberMe:n,captcha:r}).then((function(e){return e.data}))},logout:function(){return l.delete("/auth/login").then((function(e){return e.data}))},updatePhoto:function(e){var t=new FormData;return t.append("image",e),l.put("/profile/photo",t,{headers:{"Content-Type":"multipart/form-data"}}).then((function(e){return e.data}))},updateProfile:function(e){return l.put("/profile",e).then((function(e){return e.data}))},getCaptchaUrl:function(){return l.get("security/get-captcha-url").then((function(e){return e.data}))}},d=n(0),f="auth/SET_USERS_AUTH",j="auth/SET_ERROR_MESSAGE",b="auth/SET_CAPTCH_URL",h={id:null,login:null,email:null,isAuthorized:!1,errorMessage:"",captcha:null},m=function(e,t,n,r){return{type:f,payload:{id:e,login:t,email:n,isAuthorized:r}}},O=function(e){return{type:j,payload:{errorMessage:e}}},g=function(e){return{type:b,payload:{captcha:e}}},x=function(){return function(){var e=Object(i.a)(o.a.mark((function e(t){var n,r,a,s,i;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.requestUsersData();case 2:n=e.sent,r=n.data,a=r.id,s=r.login,i=r.email,0===n.resultCode&&t(m(a,s,i,!0));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},v=function(){return function(){var e=Object(i.a)(o.a.mark((function e(t){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.getCaptchaUrl();case 2:n=e.sent,t(g(n.url));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},_=n(15),w="ADD-MESSAGE",N={dialogs:[{id:"1",name:"Igor"},{id:"2",name:"Lena"},{id:"3",name:"Vasya"},{id:"4",name:"Katya"}],messages:[{id:"1",message:"whats upp"},{id:"2",message:"hi"},{id:"3",message:"how old are u my friend"}]},P=function(e,t,n,r){return e.map((function(e){return e[t]===n?Object(c.a)(Object(c.a)({},e),r):e}))},y="findeUsers/SET_CURRENT_PAGE",I="findeUsers/SET_TOTAL_USERS_COUNT",S="findeUsers/TOGGLE_IS_FETCHING",k="findeUsers/FOLLOWING_IN_PROGRESS",C="findeUsers/FOLLOW",z="findeUsers/UNFOLLOW",F="findeUsers/SET_USERS",A="findeUsers/SET_CURRENT_PORTION",U={users:[],pageSize:9,totalUsersCount:0,currentPage:1,isFetching:!1,followInProgress:[],portionSize:10,currentPortionNumber:1},D=function(e){return{type:C,userId:e}},M=function(e){return{type:z,userId:e}},L=function(e){return{type:F,payload:{users:e}}},T=function(e){return{type:S,payload:{isFetching:e}}},E=function(e,t){return{type:k,isFetching:e,id:t}},W=function(){var e=Object(i.a)(o.a.mark((function e(t,n,r,a){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(E(!0,n)),e.next=3,r(n);case 3:0===e.sent.resultCode&&t(a(n)),t(E(!1,n));case 6:case"end":return e.stop()}}),e)})));return function(t,n,r,a){return e.apply(this,arguments)}}(),R="profile/ADD-POST",V="profile/SET_PROFILE",q="profile/SET_STATUS",H="profile/SET_PHOTO",J="profile/SET_PROFILE_ClOUD",G={posts:[{id:"1",message:"Hello",likesCount:"21"},{id:"2",message:"Welcome",likesCount:"3"}],friends:[{id:1,src:"https://external-content.duckduckgo.com/iu/?u=https%3A%2F%2Fwww.hawtcelebs.com%2Fwp-content%2Fuploads%2F2018%2F03%2Fadelaide-kane-at-beautiful-people-show-at-paris-fashion-week-03-06-2018-2.jpg&f=1&nofb=1"},{id:2,src:"https://external-content.duckduckgo.com/iu/?u=https%3A%2F%2Fwallup.net%2Fwp-content%2Fuploads%2F2016%2F05%2F13%2F334355-people-model-fashion-forest-dress-portrait.jpg&f=1&nofb=1"},{id:3,src:"https://external-content.duckduckgo.com/iu/?u=https%3A%2F%2Fstatic.businessinsider.com%2Fimage%2F52a5eabc69bedd1379312cf4%2Fimage.jpg&f=1&nofb=1"}],profileInfo:null,profileInfoCloud:null,status:""},B=function(e){return{type:V,payload:{profileInfo:e}}},Z=function(e){return{type:J,payload:{profileInfoCloud:e}}},Q=function(e){return{type:q,payload:{status:e}}},K=function(){var e=Object(i.a)(o.a.mark((function e(t,n,r){var a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.getProfile(t);case 2:a=e.sent,r(n(a));case 4:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),Y=function(e){return function(){var t=Object(i.a)(o.a.mark((function t(n){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:K(e,B,n);case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},X=function(e){return function(){var t=Object(i.a)(o.a.mark((function t(n){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:K(e,Z,n);case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},$=n(110),ee="app/SUCCESSFULL_INITIALIZATION",te={isInitialized:!1},ne=n(111),re=Object(a.combineReducers)({dialogsPage:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:N,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case w:var n={id:4,message:t.message};return Object(c.a)(Object(c.a)({},e),{},{messages:[].concat(Object(_.a)(e.messages),[n])});default:return e}},profilePage:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:G,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case R:var n={id:5,message:t.post,likesCount:2};return Object(c.a)(Object(c.a)({},e),{},{posts:[].concat(Object(_.a)(e.posts),[n])});case V:case J:case q:return Object(c.a)(Object(c.a)({},e),t.payload);case H:return Object(c.a)(Object(c.a)({},e),{},{profileInfo:Object(c.a)(Object(c.a)({},e.profileInfo),{},{photos:t.photos}),profileInfoCloud:Object(c.a)(Object(c.a)({},e.profileInfoCloud),{},{photos:t.photos})});default:return e}},findUsersPage:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:U,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case C:return Object(c.a)(Object(c.a)({},e),{},{users:P(e.users,"id",t.userId,{followed:!0})});case z:return Object(c.a)(Object(c.a)({},e),{},{users:P(e.users,"id",t.userId,{followed:!1})});case F:case y:case I:case A:case S:return Object(c.a)(Object(c.a)({},e),t.payload);case k:return Object(c.a)(Object(c.a)({},e),{},{followInProgress:t.isFetching?[].concat(Object(_.a)(e.followInProgress),[t.id]):e.followInProgress.filter((function(e){return e!==t.id}))});default:return e}},auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:h,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case f:case b:case j:return Object(c.a)(Object(c.a)({},e),t.payload);default:return e}},app:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:te,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case ee:return Object(c.a)(Object(c.a)({},e),{},{isInitialized:!0});default:return e}}}),ae=Object(a.createStore)(re,Object(ne.composeWithDevTools)(Object(a.applyMiddleware)($.a)));window.store=ae;var se=ae,oe=n(4),ie=n(5),ce=n(8),ue=n(9),le=n(1),pe=n.n(le),de=n(14),fe=(n(148),n.p+"static/media/spinner.94610c79.svg"),je=n(76),be=n.n(je),he=function(){return Object(d.jsx)("div",{className:be.a.wrapper,children:Object(d.jsx)("img",{src:fe,className:be.a.preloader,alt:"preloader"})})},me=n(10),Oe=n(47),ge=n.n(Oe),xe=n.p+"static/media/nophoto.9273afa0.png",ve=function(e){var t=e.profileInfoCloud,n=e.isAuthorized;return t&&n?Object(d.jsxs)(me.b,{to:"/profile",className:ge.a.cloud,children:[Object(d.jsx)("div",{className:ge.a.photo,children:Object(d.jsx)("img",{src:t.photos.small||xe,alt:"cloudPhoto"})}),Object(d.jsx)("div",{className:ge.a.name,children:t.fullName})]}):Object(d.jsx)("div",{className:ge.a.cloud})},_e=function(e){Object(ce.a)(n,e);var t=Object(ue.a)(n);function n(){return Object(oe.a)(this,n),t.apply(this,arguments)}return Object(ie.a)(n,[{key:"componentDidMount",value:function(){this.props.isAuthorized&&this.props.getProfileCloud(this.props.authorizedId)}},{key:"componentDidUpdate",value:function(e){this.props.isAuthorized!==e.isAuthorized&&this.props.authorizedId&&this.props.getProfileCloud(this.props.authorizedId)}},{key:"render",value:function(){return Object(d.jsx)(ve,{profileInfoCloud:this.props.profileInfoCloud,isAuthorized:this.props.isAuthorized})}}]),n}(le.Component),we=Object(de.b)((function(e){return{profileInfoCloud:e.profilePage.profileInfoCloud,authorizedId:e.auth.id,isAuthorized:e.auth.isAuthorized}}),{getProfileCloud:X})(_e),Ne=n(17),Pe=n(31),ye=["profileInfo","showFullName"],Ie=function(e){var t=e.contactTitle,n=e.contactValue,r=e.bold,a=e.contact,s=e.infoValue;return Object(d.jsxs)("div",{className:a,children:[Object(d.jsxs)("span",{className:r,children:[t,": "]})," ",Object(d.jsx)("span",{className:s,children:n||"no info"})]})},Se=function(e){var t=e.profileInfo,n=e.showFullName,r=void 0!==n&&n,a=Object(Pe.a)(e,ye);return Object(d.jsxs)("div",{className:a.infoWrapper,children:[r&&Object(d.jsxs)("div",{className:a.infoItem,children:[Object(d.jsx)("span",{className:a.bold,children:"Full Name: "})," ",Object(d.jsx)("span",{className:a.infoValue,children:t.fullName||"no info"})]}),Object(d.jsxs)("div",{className:a.infoItem,children:[Object(d.jsx)("span",{className:a.bold,children:"About me: "}),Object(d.jsx)("span",{className:a.infoValue,children:t.aboutMe||"no info"})]}),Object(d.jsxs)("div",{className:a.infoItem,children:[Object(d.jsx)("span",{className:a.bold,children:"Looking for a job: "})," ",Object(d.jsx)("span",{className:a.infoValue,children:t.lookingForAJob?"yes":"no info"})]}),t.lookingForAJob&&Object(d.jsxs)("div",{className:a.infoItem,children:[Object(d.jsx)("span",{className:a.bold,children:"Looking for a job description: "})," ",Object(d.jsx)("span",{className:"".concat(a.jobDescription," ").concat(a.infoValue," "),children:t.lookingForAJobDescription||"no info"})]}),Object(d.jsxs)("div",{className:a.contactsWrapper,children:[Object(d.jsx)("span",{className:a.bold,children:"Contacts: "}),Object.keys(t.contacts).map((function(e){return Object(d.jsx)(Ie,{contactTitle:e,contactValue:t.contacts[e],bold:a.bold,contact:a.contact,infoValue:a.infoValue},e)}))]})]})},ke=n(48),Ce=n.n(ke),ze=n(18),Fe=["label"],Ae=function(e){var t=e.label,n=Object(Pe.a)(e,Fe),r=Object(ze.e)(n),a=Object(Ne.a)(r,1)[0];return Object(d.jsxs)("div",{className:n.fieldwrapper,children:[Object(d.jsx)("label",{htmlFor:a.name,children:t}),Object(d.jsx)(ze.b,Object(c.a)(Object(c.a)({as:n.as},a),n)),Object(d.jsx)(ze.a,{name:a.name,children:function(e){return Object(d.jsx)("div",{className:"error",children:e})}})]})},Ue=n(16),De=function(e){var t=e.profileInfo,n=e.updateProfile,r=e.setEditMode,a={aboutMe:t.aboutMe,lookingForAJob:t.lookingForAJob,lookingForAJobDescription:t.lookingForAJobDescription,fullName:t.fullName,contacts:{facebook:t.contacts.facebook,website:t.contacts.website,vk:t.contacts.vk,twitter:t.contacts.twitter,instagram:t.contacts.instagram,youtube:t.contacts.youtube,github:t.contacts.github,mainLink:t.contacts.mainLink}},s=Ue.b().matches(/((https?):\/\/)?(www.)?[a-z0-9]+(\.[a-z]{2,}){1,3}(#?\/?[a-zA-Z0-9#]+)*\/?(\?[a-zA-Z0-9-_]+=[a-zA-Z0-9-%]+&?)?$/,"Enter correct url!"),o=Ue.a({fullName:Ue.b().required("Required"),aboutMe:Ue.b().required("Required"),lookingForAJobDescription:Ue.b().required("Required"),contacts:Ue.a(Object.fromEntries(Object.entries(t.contacts).map((function(e){var t=Object(Ne.a)(e,2),n=t[0];t[1];return[n,s]}))))});return Object(d.jsx)("div",{children:Object(d.jsx)(ze.d,{initialValues:a,onSubmit:function(e){n(e),r(!1)},validationSchema:o,children:Object(d.jsxs)(ze.c,{children:[Object(d.jsx)(Ae,{label:"Full name:",name:"fullName",type:"text",fieldwrapper:"fieldWrapper"}),Object(d.jsx)(Ae,{label:"About me:",name:"aboutMe",type:"text",fieldwrapper:"fieldWrapper",as:"textarea"}),Object(d.jsx)(Ae,{label:"Looking for a job:",name:"lookingForAJob",type:"checkbox",fieldwrapper:"fieldWrapper"}),Object(d.jsx)(Ae,{label:"Looking for a job description:",name:"lookingForAJobDescription",type:"text",fieldwrapper:"fieldWrapper",as:"textarea"}),Object(d.jsx)("div",{children:"Contacts:"}),Object.keys(t.contacts).map((function(e){return Object(d.jsxs)("div",{className:"contact",children:[e,": ",Object(d.jsx)(Ae,{name:"contacts."+e,type:"text",className:"contactInput"})]},e)})),Object(d.jsx)("button",{type:"submit",className:"submitInfo",children:"Save"})]})})})},Me=function(e){var t=e.profileInfo,n=e.updateProfile,r=Object(le.useState)(!1),a=Object(Ne.a)(r,2),s=a[0],o=a[1];return Object(d.jsxs)("div",{className:Ce.a.div,children:[Object(d.jsxs)("div",{className:Ce.a.titleWrapper,children:[Object(d.jsx)("div",{className:Ce.a.title,children:"My Information"}),!s&&Object(d.jsx)("button",{className:Ce.a.button,onClick:function(){o(!0)},children:"Change"})]}),s?Object(d.jsx)(De,{profileInfo:t,updateProfile:n,setEditMode:o}):Object(d.jsx)(Se,{profileInfo:t,infoItem:"infoItem",showFullName:!0,jobDescription:"jobDescription",contact:"contact",infoValue:"infoValue"})]})},Le=function(e){Object(ce.a)(n,e);var t=Object(ue.a)(n);function n(){return Object(oe.a)(this,n),t.apply(this,arguments)}return Object(ie.a)(n,[{key:"componentDidMount",value:function(){this.props.isAuthorized&&this.props.getProfile(this.props.authorizedId)}},{key:"render",value:function(){return this.props.isAuthorized?this.props.profileInfo?Object(d.jsx)("div",{children:Object(d.jsx)(Me,{profileInfo:this.props.profileInfo,updateProfile:this.props.updateProfile})}):Object(d.jsx)(he,{}):Object(d.jsx)(u.a,{to:"/login"})}}]),n}(pe.a.Component),Te=Object(de.b)((function(e){return{profileInfo:e.profilePage.profileInfo,authorizedId:e.auth.id,isAuthorized:e.auth.isAuthorized}}),{getProfile:Y,updateProfile:function(e){return function(){var t=Object(i.a)(o.a.mark((function t(n,r){var a;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=r().auth.id,t.next=3,p.updateProfile(e);case 3:0===t.sent.resultCode&&(n(Y(a)),n(X(a)));case 5:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}})(Le),Ee=n(49),We=n.n(Ee),Re=n(117),Ve=n.n(Re),qe=function(e){return Object(d.jsx)("div",{className:Ve.a.dialog,children:Object(d.jsx)(me.b,{to:"/dialogs/"+e.id,children:e.name})})},He=function(e){return Object(d.jsx)("div",{children:e.message})},Je=["initialValues","onSubmit","validationSchema"],Ge=function(e){var t=e.initialValues,n=e.onSubmit,r=e.validationSchema,a=Object(Pe.a)(e,Je);return Object(d.jsx)(ze.d,{initialValues:t,onSubmit:n,validationSchema:r,children:Object(d.jsxs)(ze.c,{children:[Object(d.jsx)(ze.b,{as:a.as,type:a.type,name:a.name,placeholder:a.placeholder}),Object(d.jsx)("button",{type:"submit",children:"Send"})]})})},Be=function(e){var t=Ue.a({message:Ue.b().required("Write a message")}),n=e.dialogs.map((function(e){return Object(d.jsx)(qe,{name:e.name,id:e.id},e.id)})),r=e.messages.map((function(e){return Object(d.jsx)(He,{message:e.message},e.id)}));return Object(d.jsxs)("div",{className:We.a.dialogs,children:[Object(d.jsx)("div",{className:We.a.dialogsItems,children:n}),Object(d.jsx)("div",{className:We.a.messages,children:r}),Object(d.jsx)("div",{className:We.a.inputWrapper,children:Object(d.jsx)(Ge,{initialValues:{message:""},onSubmit:function(t){e.sendMessage(t.message)},validationSchema:t,as:"textarea",name:"message",placeholder:"Type any message, my friend..."})})]})},Ze=function(e){return{isAuthorized:e.auth.isAuthorized}},Qe=function(e){return Object(de.b)(Ze)((function(t){return t.isAuthorized?Object(d.jsx)(e,Object(c.a)({},t)):Object(d.jsx)(u.a,{to:"/login"})}))},Ke=Object(a.compose)(Qe,Object(de.b)((function(e){return{dialogs:e.dialogsPage.dialogs,messages:e.dialogsPage.messages}}),{sendMessage:function(e){return{type:"ADD-MESSAGE",message:e}}}))(Be),Ye=pe.a.memo((function(e){for(var t=Math.ceil(e.totalItemsCount/e.pageSize),n=[],r=1;r<=t;r++)n.push(r);var a=Math.ceil(t/e.portionSize),s=Object(le.useState)(e.currentPortionNumber),o=Object(Ne.a)(s,2),i=o[0],c=o[1],u=(i-1)*e.portionSize+1,l=i*e.portionSize;return Object(d.jsxs)("div",{className:"pagination",children:[i>1&&Object(d.jsx)("button",{onClick:function(){return c(i-1)},className:"pagination__prev",children:"prev"}),Object(d.jsx)("div",{className:"pagination__pages",children:n.filter((function(e){return e>=u&&e<=l})).map((function(t){return Object(d.jsx)("span",{className:e.currentPage===t?"pagination__selected":null,onClick:function(){return t!==e.currentPage&&(n=t,r=i,e.onPageChanged(n),void e.setCurrentPortionNumber(r));var n,r},children:t},t)}))}),i<a&&Object(d.jsx)("button",{onClick:function(){return c(i+1)},className:"pagination__next",children:"next"})]})})),Xe=pe.a.memo((function(e){return Object(d.jsxs)("div",{className:"findusers",children:[e.isFetching?Object(d.jsx)("div",{className:"findusers__preloader",children:Object(d.jsx)(he,{})}):Object(d.jsx)("div",{className:"users",children:e.users.map((function(t){return Object(d.jsxs)("div",{className:"users__wrapper",children:[Object(d.jsxs)("div",{className:"users__user",children:[Object(d.jsx)(me.b,{to:"/profile/"+t.id,children:Object(d.jsx)("img",{src:t.photos.small||xe,alt:"userPhoto",className:"users__photo"})}),t.followed?Object(d.jsx)("button",{disabled:e.followInProgress.includes(t.id),onClick:function(){e.unfollowing(t.id)},children:"unfollow"}):Object(d.jsx)("button",{disabled:e.followInProgress.includes(t.id),onClick:function(){e.following(t.id)},children:"follow"})]}),Object(d.jsxs)(me.b,{to:"/profile/".concat(t.id),className:"users__description",children:[Object(d.jsx)("div",{className:"users__name",children:t.name}),Object(d.jsx)("div",{className:"users__status",children:t.status})]})]},t.id)}))}),Object(d.jsx)("div",{className:"users__pagination",children:Object(d.jsx)(Ye,{totalItemsCount:e.totalUsersCount,pageSize:e.pageSize,currentPage:e.currentPage,onPageChanged:e.onPageChanged,portionSize:e.portionSize,currentPortionNumber:e.currentPortionNumber,setCurrentPortionNumber:e.setCurrentPortionNumber})})]})})),$e=function(e){Object(ce.a)(n,e);var t=Object(ue.a)(n);function n(){var e;Object(oe.a)(this,n);for(var r=arguments.length,a=new Array(r),s=0;s<r;s++)a[s]=arguments[s];return(e=t.call.apply(t,[this].concat(a))).onPageChanged=function(t){e.props.onPageChanged(t,e.props.pageSize)},e}return Object(ie.a)(n,[{key:"componentDidMount",value:function(){this.props.getUsers(this.props.currentPage,this.props.pageSize)}},{key:"render",value:function(){return Object(d.jsx)(Xe,{totalUsersCount:this.props.totalUsersCount,pageSize:this.props.pageSize,users:this.props.users,currentPage:this.props.currentPage,onPageChanged:this.onPageChanged,followInProgress:this.props.followInProgress,unfollowing:this.props.unfollowing,following:this.props.following,portionSize:this.props.portionSize,isFetching:this.props.isFetching,currentPortionNumber:this.props.currentPortionNumber,setCurrentPortionNumber:this.props.setCurrentPortionNumber})}}]),n}(pe.a.Component),et=Object(a.compose)(Object(de.b)((function(e){return{users:e.findUsersPage.users,pageSize:e.findUsersPage.pageSize,totalUsersCount:e.findUsersPage.totalUsersCount,currentPage:e.findUsersPage.currentPage,followInProgress:e.findUsersPage.followInProgress,isFetching:e.findUsersPage.isFetching,portionSize:e.findUsersPage.portionSize,currentPortionNumber:e.findUsersPage.currentPortionNumber}}),{onPageChanged:function(e,t){return function(){var n=Object(i.a)(o.a.mark((function n(r){var a;return o.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r(T(!0)),r({type:y,payload:{currentPage:e}}),n.next=4,p.getUsers(e,t);case 4:a=n.sent,r(T(!1)),r(L(a.items));case 7:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()},getUsers:function(e,t){return function(){var n=Object(i.a)(o.a.mark((function n(r){var a;return o.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r(T(!0)),n.next=3,p.getUsers(e,t);case 3:a=n.sent,r(T(!1)),r(L(a.items)),r((s=a.totalCount,{type:I,payload:{totalUsersCount:s}}));case 7:case"end":return n.stop()}var s}),n)})));return function(e){return n.apply(this,arguments)}}()},unfollowing:function(e){return function(){var t=Object(i.a)(o.a.mark((function t(n){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:W(n,e,p.unfollowUser.bind(p),M);case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},following:function(e){return function(){var t=Object(i.a)(o.a.mark((function t(n){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:W(n,e,p.followUser.bind(p),D);case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},setCurrentPortionNumber:function(e){return{type:A,payload:{currentPortionNumber:e}}}}))($e),tt=n(78),nt=Object(tt.a)((function(e){return e.profilePage.posts}),(function(e){return e})),rt=Object(tt.a)((function(e){return e.profilePage.friends}),(function(e){return e})),at=n(118),st=n.n(at),ot=n(41),it=n.n(ot),ct=pe.a.memo((function(e){var t=Object(le.useState)(!1),n=Object(Ne.a)(t,2),r=n[0],a=n[1],s=Object(le.useState)(e.status),o=Object(Ne.a)(s,2),i=o[0],c=o[1];Object(le.useEffect)((function(){c(e.status)}),[e.status]);return Object(d.jsx)("div",{children:Object(d.jsx)("div",{children:r?Object(d.jsx)("input",{autoFocus:!0,onBlur:function(){a(!1),e.updateStatus(i)},value:i,onChange:function(e){c(e.currentTarget.value)}}):Object(d.jsx)("span",{onClick:function(){e.isOwner&&a(!0)},className:e.isOwner?"status":null,children:e.status||"..."})})})})),ut=n.p+"static/media/uploadIcon.d4fe03eb.svg",lt=["updatePhoto","profileInfo"],pt=function(e){var t=e.updatePhoto,n=e.profileInfo,r=Object(Pe.a)(e,lt);return Object(d.jsxs)("div",{className:it.a.wrapper,children:[Object(d.jsxs)("div",{className:it.a.nameWrapper,children:[Object(d.jsx)("img",{src:n.photos.large||xe,className:it.a.photo,alt:"avatar"}),r.isOwner&&Object(d.jsxs)("div",{className:it.a.upload,children:[Object(d.jsx)("label",{htmlFor:"photo",children:Object(d.jsx)("img",{src:ut,alt:"uploadIcon",width:"35"})}),Object(d.jsx)("input",{type:"file",onChange:function(e){var n=e.target.files;n.length>0&&t(n[0])},name:"photo",id:"photo"})]}),Object(d.jsxs)("div",{children:[Object(d.jsx)("div",{className:it.a.name,children:n.fullName}),Object(d.jsx)(ct,{status:r.status,updateStatus:r.updateStatus,isOwner:r.isOwner})]})]}),Object(d.jsx)(Se,{profileInfo:n,infoWrapper:"infoWrapper",contactsWrapper:"contactsWrapper",bold:"bold"})]})},dt=n(63),ft=n.n(dt),jt=n(33),bt=n.n(jt),ht=function(e){return Object(d.jsxs)("div",{className:bt.a.item,children:[Object(d.jsxs)("div",{className:bt.a.wrapper,children:[Object(d.jsx)("img",{src:e.photos.small||xe,className:bt.a.photo,alt:"smallPhoto"}),Object(d.jsx)("div",{className:bt.a.message,children:e.message})]}),Object(d.jsxs)("div",{className:bt.a.counter,children:[Object(d.jsx)("button",{className:bt.a.button,children:"Like"}),Object(d.jsx)("span",{className:bt.a.like,children:e.likes})]})]})},mt=pe.a.memo((function(e){var t={post:""},n=Ue.a({post:Ue.b().required()}),r=e.posts.map((function(t){return Object(d.jsx)(ht,{message:t.message,likes:t.likesCount,photos:e.photos},t.id)}));return Object(d.jsxs)("div",{className:ft.a.wrapper,children:[Object(d.jsx)("h3",{className:ft.a.activities,children:"My activity"}),Object(d.jsx)("div",{className:ft.a.inputWrapper,children:Object(d.jsx)(Ge,{initialValues:t,validationSchema:n,onSubmit:function(n,r){var a=r.resetForm;e.addPost(n.post),a(t)},type:"text",name:"post",as:"textarea",placeholder:"Write your thoughts..."})}),r]})})),Ot=function(e){return Object(d.jsxs)("div",{className:st.a.content,children:[Object(d.jsx)(pt,{updatePhoto:e.updatePhoto,isOwner:e.isOwner,profileInfo:e.profileInfo,status:e.status,updateStatus:e.updateStatus}),Object(d.jsx)(mt,{posts:e.posts,addPost:e.addPost,photos:e.profileInfo.photos})]})},gt=function(e){Object(ce.a)(n,e);var t=Object(ue.a)(n);function n(){var e;Object(oe.a)(this,n);for(var r=arguments.length,a=new Array(r),s=0;s<r;s++)a[s]=arguments[s];return(e=t.call.apply(t,[this].concat(a))).refreshProfile=function(){var t=e.props.match.params.userId;t||(t=e.props.authorizedId),e.props.getProfile(t),e.props.getStatus(t)},e}return Object(ie.a)(n,[{key:"componentDidMount",value:function(){this.refreshProfile()}},{key:"componentDidUpdate",value:function(e){this.props.match.params.userId!==e.match.params.userId&&this.refreshProfile()}},{key:"render",value:function(){return this.props.profileInfo?Object(d.jsx)(Ot,Object(c.a)(Object(c.a)({},this.props),{},{isOwner:!this.props.match.params.userId})):Object(d.jsx)(he,{})}}]),n}(pe.a.Component),xt=Object(a.compose)(Qe,Object(de.b)((function(e){return{posts:nt(e),friends:rt(e),profileInfo:e.profilePage.profileInfo,status:e.profilePage.status,authorizedId:e.auth.id}}),{addPost:function(e){return{type:R,post:e}},getProfile:Y,getStatus:function(e){return function(){var t=Object(i.a)(o.a.mark((function t(n){var r;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,p.getStatus(e);case 2:r=t.sent,n(Q(r));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},updateStatus:function(e){return function(){var t=Object(i.a)(o.a.mark((function t(n){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,p.updateStatus(e);case 2:0===t.sent.resultCode&&n(Q(e));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},updatePhoto:function(e){return function(){var t=Object(i.a)(o.a.mark((function t(n){var r;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,p.updatePhoto(e);case 2:r=t.sent,n((a=r.data.photos,{type:H,photos:a}));case 4:case"end":return t.stop()}var a}),t)})));return function(e){return t.apply(this,arguments)}}()}}),u.f)(gt),vt=n(42),_t=n.n(vt),wt=Object(de.b)((function(e){return{isAuthorized:e.auth.isAuthorized,errorMessage:e.auth.errorMessage,captcha:e.auth.captcha}}),{login:function(e,t,n,r){return function(){var a=Object(i.a)(o.a.mark((function a(s){var i;return o.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,p.login(e,t,n,r);case 2:0===(i=a.sent).resultCode?(s(x()),s(O(null)),s(g(null))):(10===i.resultCode&&s(v()),s(O(i.messages[0])));case 4:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()}})((function(e){var t=Ue.a({email:Ue.b().email().required("Required"),password:Ue.b().required("Required")});return e.isAuthorized?Object(d.jsx)(u.a,{to:"/profile"}):Object(d.jsx)("div",{className:_t.a.wrapper,children:Object(d.jsx)(ze.d,{initialValues:{email:"",password:"",rememberMe:!0,captcha:""},onSubmit:function(t){var n=t.email,r=t.password,a=t.rememberMe,s=t.captcha;e.login(n,r,a,s)},validationSchema:t,children:Object(d.jsxs)(ze.c,{name:"form",children:[Object(d.jsxs)("div",{className:_t.a.fieldWrapper,children:[Object(d.jsx)(Ae,{label:"Email",name:"email",type:"text",className:"email"}),Object(d.jsx)(Ae,{label:"Password",name:"password",type:"password",className:"password"}),Object(d.jsx)(Ae,{label:"Remember me",name:"rememberMe",type:"checkbox",className:"checkbox"}),e.captcha&&Object(d.jsxs)("div",{className:_t.a.captcha,children:[Object(d.jsx)("img",{src:e.captcha,alt:"captcha"}),Object(d.jsx)(ze.b,{name:"captcha",type:"text"})]}),e.errorMessage&&Object(d.jsx)("div",{className:_t.a.errorMessage,children:e.errorMessage})]}),Object(d.jsx)("button",{type:"submit",className:_t.a.formButton,children:"Login"})]})})})})),Nt=function(){return Object(d.jsxs)("div",{className:"app-wrapper-content",children:[Object(d.jsx)(u.b,{exact:!0,path:"/",render:function(){return Object(d.jsx)(u.a,{to:"/profile"})}}),Object(d.jsx)(u.b,{path:"/dialogs",render:function(){return Object(d.jsx)(Ke,{})}}),Object(d.jsx)(u.b,{path:"/profile/:userId?",render:function(){return Object(d.jsx)(xt,{})}}),Object(d.jsx)(u.b,{path:"/settings",render:function(){return Object(d.jsx)(Te,{})}}),Object(d.jsx)(u.b,{path:"/findusers",render:function(){return Object(d.jsx)(et,{})}}),Object(d.jsx)(u.b,{path:"/login",render:function(){return Object(d.jsx)(wt,{})}})]})},Pt=n(34),yt=n.n(Pt),It=n.p+"static/media/logo.f8ebd123.jpg",St=Object(de.b)((function(e){return{isAuthorized:e.auth.isAuthorized,login:e.auth.login}}),{logout:function(){return function(){var e=Object(i.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.logout();case 2:if(0!==e.sent.resultCode){e.next=6;break}return t(m(null,null,null,!1)),e.abrupt("return",Object(d.jsx)(u.a,{to:"/login"}));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}})((function(e){return Object(d.jsxs)("header",{className:yt.a.header,children:[Object(d.jsx)("img",{src:It,className:yt.a.logo,alt:"logo"}),Object(d.jsx)("div",{className:yt.a.logoName,children:"Unite"}),e.isAuthorized?Object(d.jsxs)("div",{className:yt.a.loginInfo,children:[Object(d.jsx)(me.b,{to:"/profile",className:yt.a.name,children:e.login}),Object(d.jsx)("button",{onClick:e.logout,className:yt.a.logout,children:"Quit"})]}):Object(d.jsx)(me.b,{to:"/login",className:yt.a.login,children:"Login"})]})})),kt=n(37),Ct=n.n(kt),zt=function(){return Object(d.jsx)("nav",{className:"".concat(Ct.a.nav," ").concat(Ct.a.back),children:Object(d.jsxs)("ul",{children:[Object(d.jsx)("li",{children:Object(d.jsx)(me.b,{to:"/profile",activeClassName:Ct.a.activeLink,children:"Profile"})}),Object(d.jsx)("li",{children:Object(d.jsx)(me.b,{to:"/dialogs",activeClassName:Ct.a.activeLink,children:"Messages"})}),Object(d.jsx)("li",{children:Object(d.jsx)(me.b,{to:"/findusers",activeClassName:Ct.a.activeLink,children:"Users"})}),Object(d.jsx)("li",{children:Object(d.jsx)(me.b,{to:"/settings",activeClassName:Ct.a.activeLink,children:"Settings"})})]})})},Ft=function(e){Object(ce.a)(n,e);var t=Object(ue.a)(n);function n(){return Object(oe.a)(this,n),t.apply(this,arguments)}return Object(ie.a)(n,[{key:"componentDidMount",value:function(){this.props.initializeApp()}},{key:"render",value:function(){return this.props.isInitialized?Object(d.jsxs)("div",{className:"app-wrapper",children:[Object(d.jsx)(St,{}),Object(d.jsx)(zt,{}),Object(d.jsx)(Nt,{}),Object(d.jsx)(we,{})]}):Object(d.jsx)(he,{})}}]),n}(pe.a.Component),At=Object(de.b)((function(e){return{isInitialized:e.app.isInitialized}}),{initializeApp:function(){return function(){var e=Object(i.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t(x());case 2:t({type:ee});case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}})(Ft),Ut=n(57);n.n(Ut).a.render(Object(d.jsx)(pe.a.StrictMode,{children:Object(d.jsx)(me.a,{children:Object(d.jsx)(de.a,{store:se,children:Object(d.jsx)(At,{})})})}),document.getElementById("root")),r()},33:function(e,t,n){e.exports={wrapper:"Post_wrapper__3jdla",button:"Post_button__1EKve",like:"Post_like__4iqaT",counter:"Post_counter__YasMa",photo:"Post_photo__TI1AK",message:"Post_message__2UsCe"}},34:function(e,t,n){e.exports={header:"Header_header__3ID7K",logo:"Header_logo__2jp0w",logoName:"Header_logoName__STaN3",login:"Header_login__xiUaj",loginInfo:"Header_loginInfo__3vSrt",name:"Header_name__Om4RL",logout:"Header_logout__i1_9H"}},37:function(e,t,n){e.exports={nav:"Navbar_nav__qXAJ0",back:"Navbar_back__1HI1I",activeLink:"Navbar_activeLink__2QLij"}},41:function(e,t,n){e.exports={wrapper:"Description_wrapper__GG7QY",nameWrapper:"Description_nameWrapper__lITPX",photo:"Description_photo__3DO8r",name:"Description_name__iFJ2q",upload:"Description_upload__1RwBF"}},42:function(e,t,n){e.exports={wrapper:"Login_wrapper__2xWrO",formButton:"Login_formButton__srvD3",fieldWrapper:"Login_fieldWrapper__-IjsQ",errorMessage:"Login_errorMessage__18uRz",captcha:"Login_captcha__2rmZQ"}},47:function(e,t,n){e.exports={cloud:"Cloud_cloud__YU21y",photo:"Cloud_photo__QASCR",name:"Cloud_name__2gdx0"}},48:function(e,t,n){e.exports={div:"Settings_div__3ACIo",titleWrapper:"Settings_titleWrapper__3TBb3",button:"Settings_button__1Hazt",title:"Settings_title__2xGsI"}},49:function(e,t,n){e.exports={dialogs:"Dialogs_dialogs__1jRL_",dialogsItems:"Dialogs_dialogsItems__3Jzf4",messages:"Dialogs_messages__3sePI",input:"Dialogs_input__2dj9n",button:"Dialogs_button__1Etfj",inputWrapper:"Dialogs_inputWrapper__3cVFD"}},63:function(e,t,n){e.exports={wrapper:"MyPosts_wrapper__1xji1",activities:"MyPosts_activities__26mcS",inputWrapper:"MyPosts_inputWrapper__lpi6Z"}},76:function(e,t,n){e.exports={wrapper:"preloader_wrapper__29yFZ",preloader:"preloader_preloader__3ToVa"}}},[[247,1,2]]]);
//# sourceMappingURL=main.6fe54272.chunk.js.map